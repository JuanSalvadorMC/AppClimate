(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{8226:(e,a,t)=>{Promise.resolve().then(t.bind(t,57686))},57686:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>b});var s=t(95155),r=t(12115),n=t(23464),i=t(21374),o=t(83540),l=t(56965),c=t(94754),d=t(96025),m=t(16238),u=t(94517),x=t(24026);function h(e){let{onCityClick:a}=e,t=[{name:"Par\xeds",country:"Francia",continent:"Europa"},{name:"Nueva York",country:"Estados Unidos",continent:"Am\xe9rica"},{name:"Tokio",country:"Jap\xf3n",continent:"Asia"},{name:"S\xeddney",country:"Australia",continent:"Ocean\xeda"},{name:"El Cairo",country:"Egipto",continent:"\xc1frica"},{name:"Roma",country:"Italia",continent:"Europa"},{name:"Londres",country:"Reino Unido",continent:"Europa"},{name:"Madrid",country:"Espa\xf1a",continent:"Europa"},{name:"Barcelona",country:"Espa\xf1a",continent:"Europa"},{name:"Ciudad de M\xe9xico",country:"M\xe9xico",continent:"Am\xe9rica"},{name:"Singapur",country:"Singapur",continent:"Asia"},{name:"Toronto",country:"Canad\xe1",continent:"Am\xe9rica"}],r=Array.from(new Set(t.map(e=>e.continent)));return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"Descubre el clima en estas ciudades famosas:"}),(0,s.jsx)("div",{className:"space-y-4",children:r.map(e=>(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-lg font-semibold text-gray-700 mb-2",children:e}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:t.filter(a=>a.continent===e).map(e=>(0,s.jsxs)("button",{onClick:()=>a(e.name),className:"text-left hover:text-blue-600 transition-colors duration-200 cursor-pointer",children:[(0,s.jsx)("span",{className:"font-medium",children:e.name}),(0,s.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:e.country})]},e.name))})]},e))})]})}function p(e){let{initialCity:a,onAddToFavorites:t,favorites:p=[]}=e,[g,b]=(0,r.useState)(a||""),[f,j]=(0,r.useState)(null),[y,v]=(0,r.useState)([]),[N,w]=(0,r.useState)(""),[k,C]=(0,r.useState)(!1),[S,E]=(0,r.useState)([]),[A,M]=(0,r.useState)(!1),[T,F]=(0,r.useState)("temperature"),_="729d536913428102ed055faf12ed693b",D=async e=>{if(e.length<2)return void E([]);try{let a=await n.A.get("https://api.openweathermap.org/geo/1.0/direct?q=".concat(e,"&limit=5&appid=").concat(_));E(a.data)}catch(e){console.error("Error al obtener sugerencias:",e)}};(0,r.useEffect)(()=>{let e=setTimeout(()=>{g.trim()&&D(g)},300);return()=>clearTimeout(e)},[g]),(0,r.useEffect)(()=>{a&&a!==g&&(b(a),q(a))},[a]);let q=async e=>{if(!e.trim())return void w("Por favor, ingresa el nombre de una ciudad");C(!0),w(""),M(!1);try{let a=await n.A.get("https://api.openweathermap.org/data/2.5/weather?q=".concat(e,"&appid=").concat(_,"&units=metric&lang=es"));j(a.data);let t=await n.A.get("https://api.openweathermap.org/data/2.5/forecast?q=".concat(e,"&appid=").concat(_,"&units=metric&lang=es"));console.log("Datos del pron\xf3stico:",t.data.list),v(t.data.list)}catch(e){console.error("Error en la b\xfasqueda:",e),w("Ciudad no encontrada. Por favor, intenta con otro nombre."),j(null),v([])}finally{C(!1)}},P=e=>{b(e.name),q(e.name)},V=e=>new Date(1e3*e).toLocaleDateString("es-ES",{weekday:"short",day:"numeric"}),B=!!f&&p.includes(f.name);return(0,s.jsxs)("div",{className:"w-full max-w-4xl mx-auto p-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,s.jsxs)("div",{className:"flex-1 relative",children:[(0,s.jsx)("input",{type:"text",value:g,onChange:e=>b(e.target.value),onFocus:()=>M(!0),placeholder:"Buscar ciudad...",className:"w-full p-2 pr-10 border-none border-b border-gray-500 rounded-none focus:outline-none focus:ring-0 focus:border-gray-500 cursor-text",style:{borderBottom:"1px solid gray"}}),g&&(0,s.jsx)("button",{onClick:()=>{b(""),j(null),v([]),w("")},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-all duration-300 cursor-pointer p-1 hover:scale-110",title:"Limpiar b\xfasqueda",children:(0,s.jsx)("i",{className:"fas fa-times text-lg"})})]}),(0,s.jsx)("button",{onClick:()=>q(g),className:"px-4 py-2 rounded-lg transition-all duration-300 cursor-pointer hover:scale-105",style:{backgroundColor:"#4e6c7b",cursor:"pointer",color:"rgb(197 199 207)"},children:"Buscar"})]}),A&&S.length>0&&(0,s.jsx)("div",{className:"absolute z-10 w-full bg-white rounded-lg shadow-lg border border-gray-200 mt-1",children:S.map((e,a)=>(0,s.jsxs)("button",{onClick:()=>P(e),className:"w-full text-left px-4 py-2 hover:bg-gray-100 transition-all duration-300 cursor-pointer flex items-center gap-2 hover:translate-x-1",children:[(0,s.jsx)("i",{className:"fas fa-map-marker-alt text-gray-400"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium",children:e.name}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:[e.state?"".concat(e.state,", "):"",e.country]})]})]},"".concat(e.name,"-").concat(a)))})]}),N&&(0,s.jsx)("div",{className:"text-red-500 mb-4",children:N}),k&&(0,s.jsx)("div",{className:"text-center py-4",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"})}),!f&&!k&&(0,s.jsx)(h,{onCityClick:e=>{b(e),q(e)}}),f&&(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg mb-6",children:[(0,s.jsx)("div",{className:"flex justify-end mb-4",children:(0,s.jsx)("button",{onClick:()=>{j(null),v([]),b("")},className:"p-0 text-gray-400 hover:text-gray-600 transition-all duration-300 cursor-pointer hover:scale-110",title:"Cerrar",children:(0,s.jsx)("i",{className:"fas fa-times text-3xl"})})}),(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold",children:f.name}),(0,s.jsx)("p",{className:"text-2xl font-bold capitalize text-gray-600",children:f.weather[0].description})]}),(0,s.jsx)("i",{className:"fas fa-".concat({"01d":"sun","01n":"moon","02d":"cloud-sun","02n":"cloud-moon","03d":"cloud","03n":"cloud","04d":"cloud","04n":"cloud","09d":"cloud-showers-heavy","09n":"cloud-showers-heavy","10d":"cloud-sun-rain","10n":"cloud-moon-rain","11d":"bolt","11n":"bolt","13d":"snowflake","13n":"snowflake","50d":"smog","50n":"smog"}[f.weather[0].icon]||"sun"," text-4xl text-blue-500")})]}),(0,s.jsx)("button",{onClick:()=>{f&&t&&t(f.name)},className:"p-2 text-red-500 hover:text-red-600 transition-all duration-300 cursor-pointer hover:scale-110",title:B?"Quitar de favoritos":"Agregar a favoritos",children:(0,s.jsx)("i",{className:"fas fa-heart text-4xl ".concat(B?"text-red-500":"text-gray-300"," hover:text-red-600 transition-colors")})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg transition-all duration-300 hover:scale-105 hover:shadow-lg cursor-pointer hover:bg-blue-100",children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Temperatura"}),(0,s.jsxs)("p",{className:"text-2xl font-semibold",children:[Math.round(f.main.temp),"\xb0C"]})]}),(0,s.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg transition-all duration-300 hover:scale-105 hover:shadow-lg cursor-pointer hover:bg-blue-100",children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Sensaci\xf3n t\xe9rmica"}),(0,s.jsxs)("p",{className:"text-2xl font-semibold",children:[Math.round(f.main.feels_like),"\xb0C"]})]}),(0,s.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg transition-all duration-300 hover:scale-105 hover:shadow-lg cursor-pointer hover:bg-blue-100",children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Humedad"}),(0,s.jsxs)("p",{className:"text-2xl font-semibold",children:[f.main.humidity,"%"]})]}),(0,s.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg transition-all duration-300 hover:scale-105 hover:shadow-lg cursor-pointer hover:bg-blue-100",children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Viento"}),(0,s.jsxs)("p",{className:"text-2xl font-semibold",children:[f.wind.speed," m/s"]})]})]})]}),y.length>0&&(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h3",{className:"text-xl font-bold",children:"Pron\xf3stico de 5 d\xedas"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>F("temperature"),className:"px-3 py-1 rounded-lg transition-all duration-300 cursor-pointer ".concat("temperature"===T?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Temperatura"}),(0,s.jsx)("button",{onClick:()=>F("humidity"),className:"px-3 py-1 rounded-lg transition-all duration-300 cursor-pointer ".concat("humidity"===T?"bg-green-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Humedad"}),(0,s.jsx)("button",{onClick:()=>F("wind"),className:"px-3 py-1 rounded-lg transition-all duration-300 cursor-pointer ".concat("wind"===T?"bg-indigo-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Viento"})]})]}),(0,s.jsx)("div",{className:"h-[300px]",children:(0,s.jsx)(o.u,{width:"100%",height:"100%",children:(0,s.jsxs)(l.b,{data:y.filter((e,a)=>a%8==0).map(e=>({date:V(e.dt),tempMax:Math.round(e.main.temp_max),tempMin:Math.round(e.main.temp_min),humidity:e.main.humidity,windSpeed:e.wind.speed})),margin:{top:5,right:30,left:20,bottom:5},children:[(0,s.jsx)(c.d,{strokeDasharray:"3 3"}),(0,s.jsx)(d.W,{dataKey:"date",tick:{fontSize:12}}),(0,s.jsx)(m.h,{tick:{fontSize:12},label:{value:(()=>{switch(T){case"temperature":return"Temperatura (\xb0C)";case"humidity":return"Humedad (%)";case"wind":return"Velocidad del Viento (m/s)"}})(),angle:-90,position:"insideLeft"}}),(0,s.jsx)(u.m,{formatter:e=>{switch(T){case"temperature":return["".concat(e,"\xb0C"),""];case"humidity":return["".concat(e,"%"),""];case"wind":return["".concat(e," m/s"),""]}},labelFormatter:e=>"Fecha: ".concat(e)}),(0,s.jsx)(x.s,{}),(()=>{switch(T){case"temperature":return[(0,s.jsx)(i.N,{type:"monotone",dataKey:"tempMax",stroke:"#EF4444",name:"Temperatura M\xe1xima",strokeWidth:2,dot:{r:4},activeDot:{r:6}},"tempMax"),(0,s.jsx)(i.N,{type:"monotone",dataKey:"tempMin",stroke:"#3B82F6",name:"Temperatura M\xednima",strokeWidth:2,dot:{r:4},activeDot:{r:6}},"tempMin")];case"humidity":return[(0,s.jsx)(i.N,{type:"monotone",dataKey:"humidity",stroke:"#10B981",name:"Humedad",strokeWidth:2,dot:{r:4},activeDot:{r:6}},"humidity")];case"wind":return[(0,s.jsx)(i.N,{type:"monotone",dataKey:"windSpeed",stroke:"#6366F1",name:"Velocidad del Viento",strokeWidth:2,dot:{r:4},activeDot:{r:6}},"windSpeed")]}})()]})})})]})]})}function g(e){let{favorites:a,onFavoritesChange:t}=e,[i,o]=(0,r.useState)({}),[l,c]=(0,r.useState)(null),[d,m]=(0,r.useState)(null),[u,x]=(0,r.useState)({}),h=async e=>{if(!i[e]){c(e),x(a=>({...a,[e]:""}));try{let a=await n.A.get("https://api.openweathermap.org/data/2.5/weather?q=".concat(e,"&appid=").concat("729d536913428102ed055faf12ed693b","&units=metric&lang=es"));o(t=>({...t,[e]:a.data}))}catch(t){let a="Error al cargar el clima";if(n.A.isAxiosError(t))if(t.response)switch(t.response.status){case 404:a="Ciudad no encontrada";break;case 401:a="Error de autenticaci\xf3n con la API";break;case 429:a="L\xedmite de peticiones excedido";break;case 500:a="Error del servidor";break;default:a="Error ".concat(t.response.status,": ").concat(t.response.data.message||"Error desconocido")}else t.request&&(a="No se pudo conectar con el servidor");x(t=>({...t,[e]:a})),console.error("Error al obtener el clima para ".concat(e,":"),t)}finally{c(null)}}};(0,r.useEffect)(()=>{a.forEach(e=>{h(e)})},[a]);let p=e=>{let s=a.filter(a=>a!==e);t(s),localStorage.setItem("favoriteCities",JSON.stringify(s)),o(a=>{let t={...a};return delete t[e],t}),x(a=>{let t={...a};return delete t[e],t})},g=e=>({"01d":"sun","01n":"moon","02d":"cloud-sun","02n":"cloud-moon","03d":"cloud","03n":"cloud","04d":"cloud","04n":"cloud","09d":"cloud-showers-heavy","09n":"cloud-showers-heavy","10d":"cloud-sun-rain","10n":"cloud-moon-rain","11d":"bolt","11n":"bolt","13d":"snowflake","13n":"snowflake","50d":"smog","50n":"smog"})[e]||"sun",b=e=>e<=10?"text-blue-500":e<=25?"text-yellow-500":"text-red-500";return(0,s.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-lg mb-6",children:[(0,s.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Ciudades Favoritas"}),a.length>0?(0,s.jsx)("div",{className:"space-y-2",children:a.map(e=>(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg overflow-hidden group",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 transition-all duration-300 ".concat(d===e?"bg-gray-200":"hover:bg-gray-100 hover:scale-[1.02]"),onClick:()=>m(d===e?null:e),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-1 text-left hover:text-blue-500 cursor-pointer",children:[e,l===e?(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}):i[e]?(0,s.jsx)("i",{className:"fas fa-".concat(g(i[e].weather[0].icon)," ").concat(b(i[e].main.temp))}):u[e]?(0,s.jsx)("i",{className:"fas fa-exclamation-circle text-red-500",title:u[e]}):(0,s.jsx)("i",{className:"fas fa-sun text-yellow-500"})]}),(0,s.jsx)("button",{onClick:a=>{a.stopPropagation(),p(e)},className:"p-1 text-gray-400 hover:text-red-500 transition-colors duration-700 cursor-pointer",title:"Eliminar de favoritos",children:(0,s.jsx)("div",{className:"w-6 h-6 rounded-full border-2 border-current flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-sm font-bold",children:"âˆ’"})})})]}),(0,s.jsx)("div",{className:"max-h-0 overflow-hidden transition-all duration-1000 ease-in-out ".concat(d===e?"max-h-96":""),children:l===e?(0,s.jsxs)("div",{className:"text-center py-2",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Cargando datos del clima..."})]}):i[e]?(0,s.jsxs)("div",{className:"p-4 bg-white border-t space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Temperatura:"}),(0,s.jsxs)("span",{className:"font-semibold",children:[Math.round(i[e].main.temp),"\xb0C"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Sensaci\xf3n t\xe9rmica:"}),(0,s.jsxs)("span",{className:"font-semibold",children:[Math.round(i[e].main.feels_like),"\xb0C"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Humedad:"}),(0,s.jsxs)("span",{className:"font-semibold",children:[i[e].main.humidity,"%"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Viento:"}),(0,s.jsxs)("span",{className:"font-semibold",children:[i[e].wind.speed," m/s"]})]})]}):u[e]?(0,s.jsxs)("div",{className:"p-4 bg-white border-t",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 text-red-500",children:[(0,s.jsx)("i",{className:"fas fa-exclamation-circle"}),(0,s.jsx)("p",{children:u[e]})]}),(0,s.jsx)("button",{onClick:()=>h(e),className:"mt-2 w-full py-1 px-3 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors duration-300",children:"Reintentar"})]}):(0,s.jsx)("div",{className:"text-center py-2 text-gray-500",children:"No se pudieron cargar los datos del clima"})})]},e))}):(0,s.jsx)("p",{className:"text-gray-500 text-center py-2",children:"No hay ciudades favoritas. \xa1Agrega algunas usando el coraz\xf3n!"})]})}function b(){let[e,a]=(0,r.useState)([]);return(0,r.useEffect)(()=>{let e=localStorage.getItem("favoriteCities");e&&a(JSON.parse(e))},[]),(0,s.jsx)("main",{className:"min-h-screen from-blue-100 to-blue-200 py-8",children:(0,s.jsxs)("div",{className:"container mx-auto px-4",children:[(0,s.jsx)("h1",{className:"text-4xl text-center mb-8 text-blue-800",children:"Aplicaci\xf3n del Clima"}),(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-6",children:[(0,s.jsx)("div",{className:"col-span-8",children:(0,s.jsx)(p,{onAddToFavorites:t=>{if(!e.includes(t)){let s=[...e,t];a(s),localStorage.setItem("favoriteCities",JSON.stringify(s))}},favorites:e})}),(0,s.jsx)("div",{className:"col-span-4",children:(0,s.jsx)(g,{favorites:e,onFavoritesChange:a})})]})]})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[212,441,684,358],()=>a(8226)),_N_E=e.O()}]);